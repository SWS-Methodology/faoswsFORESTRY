<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 1 The faoswsForestryAggregation module | Migration of FORESTRY PRODUCTION AND TRADE Statistical Processes into the SWS</title>
  <meta name="description" content="The online book describes steps towards the migration of the current FORESTRY PRODUCTION AND TRADE statistical processes into the Corporate Statistical Working System (SWS)">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 1 The faoswsForestryAggregation module | Migration of FORESTRY PRODUCTION AND TRADE Statistical Processes into the SWS" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The online book describes steps towards the migration of the current FORESTRY PRODUCTION AND TRADE statistical processes into the Corporate Statistical Working System (SWS)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 The faoswsForestryAggregation module | Migration of FORESTRY PRODUCTION AND TRADE Statistical Processes into the SWS" />
  
  <meta name="twitter:description" content="The online book describes steps towards the migration of the current FORESTRY PRODUCTION AND TRADE statistical processes into the Corporate Statistical Working System (SWS)" />
  

<meta name="author" content="Francy Lisboa (Statistician, ESSD - Methodological Innovation Team, FAO)">


<meta name="date" content="2019-10-14">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="ess.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#introduction"><strong>Introduction</strong></a><ul>
<li><a href="index.html#data-collection"><strong>Data Collection</strong></a></li>
<li><a href="index.html#data-imput-system"><strong>Data Imput System</strong></a></li>
<li><a href="index.html#dissemination-system"><strong>Dissemination System</strong></a></li>
<li><a href="index.html#domain"><strong>Domain</strong></a></li>
<li><a href="index.html#forestry-code-lists"><strong>Forestry Code lists</strong></a></li>
<li><a href="index.html#data-tables"><strong>Data tables</strong></a></li>
<li><a href="index.html#data-sets"><strong>Data sets</strong></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html"><i class="fa fa-check"></i><b>1</b> <strong>The faoswsForestryAggregation module</strong></a><ul>
<li class="chapter" data-level="1.1" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#aims"><i class="fa fa-check"></i><b>1.1</b> <strong>Aims</strong></a></li>
<li class="chapter" data-level="1.2" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#reads-in-the-input-data-set-and-data-tables"><i class="fa fa-check"></i><b>1.2</b> <strong>Reads in the input data set and data tables</strong></a></li>
<li class="chapter" data-level="1.3" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#gets-regional-aggregation"><i class="fa fa-check"></i><b>1.3</b> <strong>Gets regional aggregation</strong></a></li>
<li class="chapter" data-level="1.4" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#gets-forestry-commodity-aggregation"><i class="fa fa-check"></i><b>1.4</b> <strong>Gets Forestry commodity aggregation</strong></a></li>
<li class="chapter" data-level="1.5" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#get-unit-values"><i class="fa fa-check"></i><b>1.5</b> <strong>Get Unit values</strong></a></li>
<li class="chapter" data-level="1.6" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#get-back-the-original-flags"><i class="fa fa-check"></i><b>1.6</b> <strong>Get back the original flags</strong></a></li>
<li class="chapter" data-level="1.7" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#convert-faostat-regions-to-sws-regions"><i class="fa fa-check"></i><b>1.7</b> <strong>Convert FAOSTAT regions to SWS regions</strong></a></li>
<li class="chapter" data-level="1.8" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#binding-national-and-regional-data"><i class="fa fa-check"></i><b>1.8</b> <strong>Binding national and regional data</strong></a></li>
<li class="chapter" data-level="1.9" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#compare-before-and-after-aggregations"><i class="fa fa-check"></i><b>1.9</b> <strong>Compare before and after aggregations</strong></a></li>
<li class="chapter" data-level="1.10" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#save-data-in-the-sws-shared-drive-and-in-the-sws-database"><i class="fa fa-check"></i><b>1.10</b> <strong>Save data in the SWS shared drive and in the SWS database</strong></a></li>
<li><a href="faoswsForestryAggregation.html#runnig-the-module-step-by-step"><strong>Runnig the module (STEP BY STEP)</strong></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Migration of FORESTRY PRODUCTION AND TRADE Statistical Processes into the SWS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="faoswsForestryAggregation" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> <strong>The faoswsForestryAggregation module</strong></h1>
<div id="aims" class="section level2">
<h2><span class="header-section-number">1.1</span> <strong>Aims</strong></h2>
<p>The faoswsForestryAggregation module essentially aims at working as a validation tool which is used by the the technical unit to check the effects of data changes in the forestry_prod_trade data set on geographical and commodity aggregations.</p>
</div>
<div id="reads-in-the-input-data-set-and-data-tables" class="section level2">
<h2><span class="header-section-number">1.2</span> <strong>Reads in the input data set and data tables</strong></h2>
<p>The module uses the <strong>forestry_prod_agg dataset</strong> as input. According to the technical unit, they will be constantly changing this dataset throughout the data cycle, specially when new data come in or the officers decide to make changes based on their domain knowledge.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">suppressMessages</span>({
  <span class="kw">library</span>(faosws)
  <span class="kw">library</span>(faoswsUtil)
  <span class="kw">library</span>(faoswsFlag)
  <span class="kw">library</span>(data.table)
  <span class="kw">library</span>(dplyr)
  <span class="kw">library</span>(tidyr)
  <span class="kw">library</span>(stringr)
})

<span class="cf">if</span>(<span class="kw">CheckDebug</span>()){
  <span class="kw">library</span>(faoswsModules)
  SETTINGS =<span class="st"> </span><span class="kw">ReadSettings</span>(<span class="st">&quot;~./github/faoswsForestryProduction/sws.yml&quot;</span>)
  <span class="kw">Sys.setenv</span>(<span class="st">&quot;R_SWS_SHARE_PATH&quot;</span> =<span class="st"> </span>SETTINGS[[<span class="st">&quot;share&quot;</span>]])
  R_SWS_SHARE_PATH =<span class="st"> </span>SETTINGS[[<span class="st">&quot;share&quot;</span>]]
  <span class="kw">SetClientFiles</span>(SETTINGS[[<span class="st">&quot;certdir&quot;</span>]])
  <span class="kw">GetTestEnvironment</span>(<span class="dt">baseUrl =</span> SETTINGS[[<span class="st">&quot;server&quot;</span>]],
                     <span class="dt">token =</span> SETTINGS[[<span class="st">&quot;token&quot;</span>]])
}
<span class="cf">if</span> (<span class="op">!</span><span class="kw">CheckDebug</span>()) {
  R_SWS_SHARE_PATH =<span class="st"> </span><span class="kw">Sys.getenv</span>(<span class="st">&quot;R_SWS_SHARE_PATH&quot;</span>)
}

### --- READ DATATABLES ----- 
agg_tree &lt;-<span class="st"> </span><span class="kw">ReadDatatable</span>(<span class="st">&#39;forestry_aggregate_composition&#39;</span>)
fo_aggregate &lt;-<span class="st"> </span>agg_tree[, <span class="kw">lapply</span>(.SD, as.integer)]
fo_agg &lt;-<span class="st"> </span><span class="kw">copy</span>(fo_aggregate)
list_items &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">c</span>(<span class="kw">unique</span>(fo_aggregate<span class="op">$</span>item_code), <span class="kw">unique</span>(fo_aggregate<span class="op">$</span>item_group_code)))
data_element &lt;-<span class="st"> </span><span class="kw">ReadDatatable</span>(<span class="st">&#39;forestry_domain_elements&#39;</span>)
list_elements &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">unique</span>(<span class="kw">as.integer</span>(data_element<span class="op">$</span>element_code)), <span class="dv">5910</span>, <span class="dv">5610</span>)

<span class="co"># For regional aggregation</span>
fstom49  &lt;-<span class="st"> </span><span class="kw">ReadDatatable</span>(<span class="st">&#39;m49_fs_iso_mapping&#39;</span>)
group_area &lt;-<span class="st"> </span>fstom49[, .(group_area_code, group_area_name)]
<span class="kw">setnames</span>(group_area, <span class="kw">c</span>(<span class="st">&quot;group_area_code&quot;</span>, <span class="st">&quot;group_area_name&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;fs_area_code&quot;</span>, <span class="st">&quot;fs_area_name&quot;</span>))
country_area &lt;-<span class="st"> </span>fstom49[, .(fs_area_code, fs_area_name)]
country_regions_fs &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">rbind</span>(country_area, group_area))
<span class="kw">setnames</span>(country_regions_fs,<span class="kw">c</span>(<span class="st">&quot;fs_area_code&quot;</span>, <span class="st">&quot;fs_area_name&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;AreaCode&quot;</span>, <span class="st">&quot;AreaName&quot;</span>))

<span class="co"># Get a table to mapping faostat regional codes to M49 regional codes</span>
fs_m49_reg &lt;-<span class="st"> </span><span class="kw">ReadDatatable</span>(<span class="st">&#39;fs_m49_regions&#39;</span>)


<span class="co"># GLOBAL VARIABLES ----</span>
<span class="co"># Get all elements but unit values.</span>
sum_elements &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="kw">c</span>(<span class="dv">5510</span>, <span class="dv">5516</span>, <span class="dv">5610</span>, <span class="dv">5616</span>, <span class="dv">5622</span>, <span class="dv">5910</span>, <span class="dv">5916</span>, <span class="dv">5922</span>))
<span class="co"># creat an object storing columns that never change.</span>
colalways &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;geographicAreaM49&quot;</span>, <span class="st">&quot;measuredItemForestry&quot;</span>, <span class="st">&quot;measuredElement&quot;</span>, <span class="st">&quot;timePointYears&quot;</span>)
<span class="co"># all aggregates</span>
group_code_list_all &lt;-<span class="st">  </span><span class="kw">as.character</span>(<span class="kw">unique</span>(fo_agg<span class="op">$</span>item_group_code))
<span class="co"># major SWS regions</span>
major_regions &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;953&quot;</span>, <span class="st">&quot;933&quot;</span>, <span class="st">&quot;1125&quot;</span>, <span class="st">&quot;913&quot;</span>, <span class="st">&quot;914&quot;</span>, <span class="st">&quot;915&quot;</span>, <span class="st">&quot;1056&quot;</span>, <span class="st">&quot;952&quot;</span>, <span class="st">&quot;934&quot;</span>)
bench &lt;-<span class="st"> </span>data_raw[, <span class="kw">mget</span>(<span class="kw">c</span>(colalways, <span class="st">&quot;Value&quot;</span>))]

## -- READ IN INPUT DATA ---- 
imputKey &lt;-<span class="st"> </span><span class="kw">DatasetKey</span>(
  <span class="dt">domain =</span> <span class="st">&quot;Forestry&quot;</span>,
  <span class="dt">dataset =</span> <span class="st">&quot;forestry_prod_trade&quot;</span>,
  <span class="dt">dimensions =</span> <span class="kw">list</span>(
    <span class="kw">Dimension</span>(<span class="dt">name =</span> <span class="st">&quot;geographicAreaM49&quot;</span>,
              <span class="dt">keys =</span> <span class="kw">GetCodeList</span>(<span class="st">&#39;Forestry&#39;</span>, <span class="st">&quot;forestry_prod_trade&quot;</span>, <span class="st">&#39;geographicAreaM49&#39;</span>)[type <span class="op">==</span><span class="st"> &#39;country&#39;</span>, code]),
    <span class="kw">Dimension</span>(<span class="dt">name =</span> <span class="st">&quot;measuredItemForestry&quot;</span>, <span class="dt">keys =</span> <span class="kw">as.character</span>(list_items)),
    <span class="kw">Dimension</span>(<span class="dt">name =</span> <span class="st">&quot;measuredElement&quot;</span>, <span class="dt">keys =</span> <span class="kw">as.character</span>(list_elements)),
    <span class="kw">Dimension</span>(<span class="dt">name =</span> <span class="st">&quot;timePointYears&quot;</span>, <span class="dt">keys =</span> <span class="kw">as.character</span>(<span class="dv">1961</span><span class="op">:</span><span class="kw">substring</span>(<span class="kw">Sys.time</span>(), <span class="dv">1</span>, <span class="dv">4</span>)))
  )
)
data_raw &lt;-<span class="st"> </span><span class="kw">GetData</span>(imputKey, <span class="dt">flags =</span> <span class="ot">TRUE</span>)
data_input &lt;-<span class="st"> </span><span class="kw">copy</span>(data_raw)</code></pre></div>
<p><br> <br></p>
</div>
<div id="gets-regional-aggregation" class="section level2">
<h2><span class="header-section-number">1.3</span> <strong>Gets regional aggregation</strong></h2>
<p>After reading in the input dataset, the module geographically aggregates the primary commodities based on FAOSTAT - UNSD M49 mapping. Please, for a full representation of this table consult either the introductory session (data table) or <a href="http://www.fao.org/faostat/en/#data/FO">this link</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># PERFORMING REGIONAL AGGREGATION ----</span>
GetRegionalAggregation &lt;-<span class="st"> </span><span class="cf">function</span>(data) {
  data_input01 &lt;-<span class="st"> </span><span class="kw">copy</span>(data)
  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.data.table</span>(data_input01)) data_input01 &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(data_input01)
  data_input01 &lt;-<span class="st"> </span>data_input01[measuredElement <span class="op">%in%</span><span class="st"> </span>sum_elements]
  to_region &lt;-<span class="st"> </span><span class="kw">unique</span>(fstom49[, <span class="kw">list</span>(group_area_code, m49)])
  <span class="kw">setnames</span>(to_region, <span class="st">&#39;m49&#39;</span>, <span class="st">&#39;geographicAreaM49&#39;</span>)
  m1 &lt;-<span class="st"> </span><span class="kw">merge</span>(data_input01, to_region, <span class="dt">by =</span> <span class="st">&quot;geographicAreaM49&quot;</span>, <span class="dt">all.x =</span> <span class="ot">TRUE</span>, <span class="dt">allow.cartesian =</span> <span class="ot">TRUE</span>)
  m1_agg &lt;-<span class="st"> </span>m1[, <span class="kw">list</span>(<span class="dt">Val =</span> <span class="kw">sum</span>(Value, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)), by =<span class="st"> </span><span class="kw">list</span>(group_area_code, measuredItemForestry, measuredElement, timePointYears)]
  <span class="kw">setnames</span>(m1_agg, <span class="kw">c</span>(<span class="st">&quot;group_area_code&quot;</span>, <span class="st">&quot;Val&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;geographicAreaM49&quot;</span>, <span class="st">&quot;Value&quot;</span>))
  data_input_c &lt;-<span class="st"> </span>m1_agg
  data_input_c<span class="op">$</span>flagObservationStatus &lt;-<span class="st"> &quot;E&quot;</span> <span class="co">#&#39; **Aggregates**</span>
  data_input_c<span class="op">$</span>flagMethod &lt;-<span class="st"> &quot;s&quot;</span> <span class="co">#&#39; ** Aggregates**</span>
  data_input_c &lt;-<span class="st"> </span><span class="kw">unique</span>(data_input_c, <span class="dt">by =</span> colalways)
  <span class="kw">return</span>(data_input_c)
}
data_input_reg &lt;-<span class="st"> </span><span class="kw">GetRegionalAggregation</span>(<span class="dt">data =</span> data_input)
data_input_reg &lt;-<span class="st"> </span>data_input_reg[<span class="op">!</span><span class="kw">is.na</span>(geographicAreaM49)][<span class="kw">order</span>(geographicAreaM49, measuredItemForestry, measuredElement, timePointYears)]
data_input_reg &lt;-<span class="st"> </span><span class="kw">unique</span>(data_input_reg, <span class="dt">by =</span> colalways)</code></pre></div>
</div>
<div id="gets-forestry-commodity-aggregation" class="section level2">
<h2><span class="header-section-number">1.4</span> <strong>Gets Forestry commodity aggregation</strong></h2>
<p>Once a data set with regional aggregate is ready, the module moves to producing commodity aggregations at the national and geographical levels. Before the aggregations, the modules filters out all commodity groups and analytical elements (Export and Import unit values) so that they can be recalculated. The technical unit requested that the aggregates should be recalculated EVERY time the module runs. Since there is an interplay between commodity groups, the current Forestry system carries the aggregation in tandem, with four commodity groups being aggregated first and then rest of aggregates. The forestry Aggregation module applies the same logic.</p>
<table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:tab1">Table 1.1: </span>First commodity groups to be calculated by the faoswsForestryAggregation module
</caption>
<thead>
<tr>
<th style="text-align:right;">
CommodityGroup
</th>
<th style="text-align:left;">
CommodityGroupName
</th>
<th style="text-align:right;">
CommodityCode
</th>
<th style="text-align:left;">
CommodityName
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1660
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphite, unbleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1661
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphite, bleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1662
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphate, unbleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1663
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphate, bleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Printing and writing papers
</td>
<td style="text-align:right;">
1612
</td>
<td style="text-align:left;">
Printing and writing papers, uncoated, wood containing
</td>
</tr>
<tr>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Printing and writing papers
</td>
<td style="text-align:right;">
1615
</td>
<td style="text-align:left;">
Printing and writing papers, uncoated, wood free
</td>
</tr>
<tr>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Printing and writing papers
</td>
<td style="text-align:right;">
1616
</td>
<td style="text-align:left;">
Printing and writing papers, coated
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1676
</td>
<td style="text-align:left;">
Household and sanitary papers
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1681
</td>
<td style="text-align:left;">
Wrapping and packaging paper and paperboard
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1683
</td>
<td style="text-align:left;">
Other paper and paperboard n.e.s.
</td>
</tr>
<tr>
<td style="text-align:right;">
1681
</td>
<td style="text-align:left;">
Wrapping and packaging paper and paperboard
</td>
<td style="text-align:right;">
1617
</td>
<td style="text-align:left;">
Case materials
</td>
</tr>
<tr>
<td style="text-align:right;">
1681
</td>
<td style="text-align:left;">
Wrapping and packaging paper and paperboard
</td>
<td style="text-align:right;">
1618
</td>
<td style="text-align:left;">
Cartonboard
</td>
</tr>
<tr>
<td style="text-align:right;">
1681
</td>
<td style="text-align:left;">
Wrapping and packaging paper and paperboard
</td>
<td style="text-align:right;">
1621
</td>
<td style="text-align:left;">
Wrapping papers
</td>
</tr>
<tr>
<td style="text-align:right;">
1681
</td>
<td style="text-align:left;">
Wrapping and packaging paper and paperboard
</td>
<td style="text-align:right;">
1622
</td>
<td style="text-align:left;">
Other papers mainly for packaging
</td>
</tr>
</tbody>
</table>
<p><br> <br> <br> The function <strong>GetAggs</strong> applies the aggregation logic to both national and regional data sets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">GetAggs &lt;-<span class="st"> </span><span class="cf">function</span>(data){
  d &lt;-<span class="st"> </span><span class="kw">copy</span>(data)
  <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.data.table</span>(d)) d &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(d)
  d &lt;-<span class="st"> </span>d[measuredElement <span class="op">%in%</span><span class="st"> </span><span class="kw">as.character</span>(sum_elements)]
  tree &lt;-<span class="st"> </span><span class="kw">copy</span>(fo_aggregate)
  agg_order &lt;-<span class="st"> </span><span class="kw">unique</span>(<span class="kw">c</span>(tree<span class="op">$</span>first_aggregates[<span class="op">!</span><span class="kw">is.na</span>(tree<span class="op">$</span>first_aggregates)], tree<span class="op">$</span>item_group_code[<span class="op">!</span>tree<span class="op">$</span>item_group_code <span class="op">%in%</span><span class="st"> </span>tree<span class="op">$</span>first_aggregates]))
  agg_order &lt;-<span class="st"> </span><span class="kw">intersect</span>(agg_order, <span class="kw">unique</span>(d<span class="op">$</span>measuredItemForestry))
  rawinput &lt;-<span class="st"> </span>d[measuredElement <span class="op">%in%</span><span class="st"> </span>sum_elements]
  rawwide &lt;-<span class="st"> </span><span class="kw">dcast</span>(rawinput, geographicAreaM49 <span class="op">+</span><span class="st"> </span>measuredElement <span class="op">+</span><span class="st"> </span>timePointYears <span class="op">~</span><span class="st"> </span>measuredItemForestry, <span class="dt">value.var =</span> <span class="st">&quot;Value&quot;</span>)
  data_new &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(<span class="kw">copy</span>(rawwide))
  <span class="cf">for</span> (agg <span class="cf">in</span> <span class="kw">seq_along</span>(agg_order)) {
    group &lt;-<span class="st"> </span><span class="kw">as.character</span>(agg_order[agg])
    all_elements &lt;-<span class="st"> </span><span class="kw">as.character</span>(<span class="kw">unique</span>(tree[item_group_code <span class="op">==</span><span class="st"> </span>group][, <span class="kw">c</span>(item_group_code, item_code)]))
    comps &lt;-<span class="st"> </span><span class="kw">as.character</span>(all_elements[<span class="op">!</span>all_elements <span class="op">%in%</span><span class="st"> </span>group])
    data_new<span class="op">$</span>agg_old &lt;-<span class="st"> </span>data_new[[group]]
    data_new[, agg_new0 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">rowSums</span>(.SD, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>), .SDcols =<span class="st"> </span>comps]
    data_new[, agg_new1 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">rowSums</span>(.SD, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), .SDcols =<span class="st"> </span>comps]
    data_new[, agg_new1 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">ifelse</span>(<span class="kw">is.na</span>(agg_new0) <span class="op">&amp;</span><span class="st"> </span>agg_new1 <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA_real_</span>, agg_new1)]
    data_new[, agg_new <span class="op">:</span><span class="er">=</span><span class="st"> </span>agg_new1]
    data_new[, agg_new <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">ifelse</span>(<span class="kw">is.na</span>(agg_new) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.na</span>(agg_old), agg_old , agg_new)]
    data_new[, <span class="kw">c</span>(<span class="st">&quot;agg_old&quot;</span>, <span class="st">&quot;agg_new0&quot;</span>, <span class="st">&quot;agg_new1&quot;</span>, group) <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]
    <span class="kw">setnames</span>(data_new, <span class="st">&quot;agg_new&quot;</span>, group)
  }
  df &lt;-<span class="st"> </span><span class="kw">melt</span>(data_new, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">variable.name =</span> <span class="st">&quot;measuredItemForestry&quot;</span>, <span class="dt">value.name =</span> <span class="st">&quot;Value&quot;</span>)
  df &lt;-<span class="st"> </span>df[, <span class="kw">list</span>(geographicAreaM49, measuredItemForestry, measuredElement, timePointYears, Value)]
  df &lt;-<span class="st"> </span>df[, <span class="kw">lapply</span>(.SD, as.character)]
  df<span class="op">$</span>Value &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(df<span class="op">$</span>Value)
  df &lt;-<span class="st"> </span>df[<span class="op">!</span><span class="kw">is.na</span>(Value)]
  <span class="kw">return</span>(df)
}
pivot_data_national &lt;-<span class="st"> </span><span class="kw">GetAggs</span>(<span class="dt">data =</span> data_input)
pivot_data_regional &lt;-<span class="st"> </span><span class="kw">GetAggs</span>(<span class="dt">data =</span> data_input_reg)</code></pre></div>
<p><br></p>
</div>
<div id="get-unit-values" class="section level2">
<h2><span class="header-section-number">1.5</span> <strong>Get Unit values</strong></h2>
<p>Once the import and export are calculated for values and quantity, the unit price, which is the quotient between values and quantity, can be easily for both primary and group commodities at the national and regional levels. The R function for accomplishing this is <strong>GetUnitValues().</strong> <br></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Getting UNIT values</span>
GetUnitValues &lt;-<span class="st"> </span><span class="cf">function</span>(data) {
    d &lt;-<span class="st"> </span><span class="kw">copy</span>(data)
    <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.data.table</span>(d) d &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(d)
    wide_df &lt;-<span class="st"> </span><span class="kw">dcast</span>(d, geographicAreaM49 <span class="op">+</span><span class="st"> </span>measuredItemForestry <span class="op">+</span><span class="st"> </span>timePointYears <span class="op">~</span><span class="st"> </span>measuredElement, <span class="dt">value.var =</span> <span class="st">&quot;Value&quot;</span>)
    wide_df[, <span class="st">`</span><span class="dt">:=</span><span class="st">`</span> (<span class="st">`</span><span class="dt">5636</span><span class="st">`</span> =<span class="st"> </span>(<span class="st">`</span><span class="dt">5622</span><span class="st">`</span><span class="op">/</span><span class="st">`</span><span class="dt">5616</span><span class="st">`</span>)<span class="op">*</span><span class="dv">1000</span>, <span class="st">`</span><span class="dt">5936</span><span class="st">`</span> =<span class="st"> </span>(<span class="st">`</span><span class="dt">5922</span><span class="st">`</span><span class="op">/</span><span class="st">`</span><span class="dt">5916</span><span class="st">`</span>)<span class="op">*</span><span class="dv">1000</span>, <span class="st">`</span><span class="dt">5630</span><span class="st">`</span> =<span class="st"> </span><span class="dv">1000</span><span class="op">*</span>(<span class="st">`</span><span class="dt">5622</span><span class="st">`</span><span class="op">/</span><span class="st">`</span><span class="dt">5610</span><span class="st">`</span>),<span class="st">`</span><span class="dt">5930</span><span class="st">`</span> =<span class="st">  </span><span class="dv">1000</span><span class="op">*</span>(<span class="st">`</span><span class="dt">5922</span><span class="st">`</span><span class="op">/</span><span class="st">`</span><span class="dt">5910</span><span class="st">`</span>))]
    pivot_df &lt;-<span class="st"> </span><span class="kw">melt</span>(wide_df, <span class="dt">id.vars =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">variable.name =</span> <span class="st">&quot;measuredElement&quot;</span>, <span class="dt">value.name =</span> <span class="st">&quot;Value&quot;</span>)
    pivot_df &lt;-<span class="st"> </span>pivot_df[<span class="op">!</span><span class="kw">is.na</span>(Value) <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw">is.infinite</span>(Value)][, <span class="kw">list</span>(geographicAreaM49, measuredItemForestry, measuredElement,     timePointYears, Value)]
    pivot_df &lt;-<span class="st"> </span>pivot_df[measuredElement <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;5630&quot;</span>, <span class="st">&quot;5636&quot;</span>, <span class="st">&quot;5930&quot;</span>, <span class="st">&quot;5936&quot;</span>)]
    pivot_bind &lt;-<span class="st"> </span><span class="kw">rbind</span>(d, pivot_df)[<span class="kw">order</span>(geographicAreaM49, measuredItemForestry, measuredElement, timePointYears)]
    <span class="kw">return</span>(pivot_bind)
 <span class="er">}</span>
pivot_national_unit &lt;-<span class="st"> </span><span class="kw">GetUnitValues</span>(<span class="dt">data =</span> pivot_data_national)
pivot_regional_unit &lt;-<span class="st"> </span><span class="kw">GetUnitValues</span>(<span class="dt">data =</span> pivot_data_regional)</code></pre></div>
<p><br></p>
</div>
<div id="get-back-the-original-flags" class="section level2">
<h2><span class="header-section-number">1.6</span> <strong>Get back the original flags</strong></h2>
<p>With unit values already in the data sets (national and regional), the last step is to recovery the flags from the original input. Data records added during the processing come either from geographic or commodity aggregation. Therefore, these records have <strong>“E”</strong> (Aggregation) as flagObservationStatus and <strong>“s”</strong> (summation) as flagMethod. The R function <strong>GetFlags()</strong> does the work.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Recoverying original flags</span>
GetFlags &lt;-<span class="st"> </span><span class="cf">function</span>(data) {
  d &lt;-<span class="st"> </span><span class="kw">copy</span>(data)
  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.data.table</span>(d) d &lt;-<span class="st"> </span><span class="kw">as.data.table</span>(d)
  lgt &lt;-<span class="st"> &quot;5000&quot;</span> <span class="op">%in%</span><span class="st"> </span><span class="kw">unique</span>(d<span class="op">$</span>geographicAreaM49)
  <span class="cf">if</span> (lgt) {
    d[, flagObservationStatus <span class="op">:</span><span class="er">=</span><span class="st"> &quot;E&quot;</span>]
    d[, flagMethod <span class="op">:</span><span class="er">=</span><span class="st"> &quot;s&quot;</span>]
    d[, flagMethod <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">ifelse</span>(<span class="op">!</span>(measuredElement <span class="op">%in%</span><span class="st"> </span>sum_elements), <span class="st">&quot;i&quot;</span>, flagMethod)]
  } <span class="cf">else</span> {
    d &lt;-<span class="st"> </span>data_raw[d, on =<span class="st"> </span>colalways]
    d<span class="op">$</span>Value_new &lt;-<span class="st"> </span>d<span class="op">$</span>i.Value
    d[, flagObservationStatus <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">ifelse</span>(measuredItemForestry <span class="op">%in%</span><span class="st"> </span>group_code_list_all, <span class="st">&quot;E&quot;</span>, flagObservationStatus)]
    d[, flagMethod <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">ifelse</span>(measuredItemForestry <span class="op">%in%</span><span class="st"> </span>group_code_list_all, <span class="st">&quot;s&quot;</span>, flagMethod)]
    d[, flagMethod <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">ifelse</span>(<span class="op">!</span>(measuredElement <span class="op">%in%</span><span class="st"> </span>sum_elements), <span class="st">&quot;i&quot;</span>, flagMethod)]
    d &lt;-<span class="st"> </span>d[, <span class="kw">list</span>(geographicAreaM49, measuredItemForestry,measuredElement,timePointYears,Value_new,flagObservationStatus, flagMethod)]
    <span class="kw">setnames</span>(d, <span class="st">&quot;Value_new&quot;</span>, <span class="st">&quot;Value&quot;</span>)
  }
   <span class="kw">return</span>(d)
<span class="er">}</span>
pivot_national_flags &lt;-<span class="st"> </span><span class="kw">GetFlags</span>(<span class="dt">data =</span> pivot_national_unit)
pivot_regional_flags &lt;-<span class="st"> </span><span class="kw">GetFlags</span>(<span class="dt">data =</span> pivot_regional_unit)</code></pre></div>
<p><br></p>
</div>
<div id="convert-faostat-regions-to-sws-regions" class="section level2">
<h2><span class="header-section-number">1.7</span> <strong>Convert FAOSTAT regions to SWS regions</strong></h2>
<p>The processed regional data set uses FAOSTAT codes for regions. To be able to save the results in the SWS, regions must be converted to SWS regional codes compatible with the <strong>geographicAreaM49</strong> in the <strong>forestry_prod_trade_agg</strong> dataset. For this, the module uses the following function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fs2m49_reg &lt;-<span class="st"> </span><span class="cf">function</span>(data){
    df &lt;-<span class="st"> </span><span class="kw">copy</span>(data)
    n_df &lt;-<span class="st"> </span><span class="kw">names</span>(df)
    reg_code &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">unique</span>(df<span class="op">$</span>geographicAreaM49)[<span class="kw">unique</span>(<span class="kw">as.integer</span>(df<span class="op">$</span>geographicAreaM49)) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5000</span>], <span class="dv">420</span>, <span class="dv">429</span>)
    df_reg &lt;-<span class="st"> </span>df[geographicAreaM49 <span class="op">%in%</span><span class="st"> </span>reg_code]
    fs_m49_regg &lt;-<span class="st"> </span>fs_m49_reg[<span class="op">!</span><span class="kw">is.na</span>(m49_reg)]
    dmerged &lt;-<span class="st"> </span><span class="kw">merge</span>(df_reg, fs_m49_regg, <span class="dt">by.x =</span> <span class="st">&quot;geographicAreaM49&quot;</span>, <span class="dt">by.y =</span> <span class="st">&quot;fs_reg&quot;</span>)
    dmerged[, geographicAreaM49 <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="ot">NULL</span>]
    <span class="kw">setnames</span>(df_merged, <span class="st">&quot;m49_reg&quot;</span>, <span class="st">&quot;geographicAreaM49&quot;</span>)
    df_merged &lt;-<span class="st"> </span>df_merged[, <span class="kw">mget</span>(n_df)]
    df_final_ &lt;-<span class="st"> </span>df_merged[geographicAreaM49 <span class="op">%in%</span><span class="st"> </span>major_regions][<span class="kw">order</span>(geographicAreaM49, measuredItemForestry, measuredItemForestry)]
  <span class="kw">return</span>(df_final_)
}
pivot_regional_flags_sws &lt;-<span class="st"> </span><span class="kw">fs2m49_reg</span>(<span class="dt">data =</span> pivot_regional_flags)</code></pre></div>
<p><br></p>
</div>
<div id="binding-national-and-regional-data" class="section level2">
<h2><span class="header-section-number">1.8</span> <strong>Binding national and regional data</strong></h2>
<p>Binding national and regional data sets.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_all &lt;-<span class="st"> </span><span class="kw">rbind</span>(pivot_national_flags, pivot_regional_flags_sws)
data_all &lt;-<span class="st"> </span>data_all[, Value <span class="op">:</span><span class="er">=</span><span class="st"> </span><span class="kw">round</span>(Value, <span class="dv">1</span>)][<span class="kw">order</span>(geographicAreaM49, measuredItemForestry, measuredItemForestry)]
data_all &lt;-<span class="st"> </span>data_all[, <span class="kw">lapply</span>(.SD, as.character)]
data_all<span class="op">$</span>Value &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(data_all<span class="op">$</span>Value)
data_all &lt;-<span class="st"> </span>data_all[<span class="kw">complete.cases</span>(data_all), ]</code></pre></div>
</div>
<div id="compare-before-and-after-aggregations" class="section level2">
<h2><span class="header-section-number">1.9</span> <strong>Compare before and after aggregations</strong></h2>
<p>As a validation tool, the faoswsForestryAggregation module also needs to return what has changed from the input dataset. The module flags values where the absolute difference between the input dataset and the aggregate dataset is higher than one. This comparison is carried on the code snippet below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">comp &lt;-<span class="st"> </span>data_raw[data_all, on =<span class="st"> </span>colalways][, <span class="st">`</span><span class="dt">:=</span><span class="st">`</span> (<span class="dt">diff =</span> <span class="kw">round</span>(<span class="kw">abs</span>(Value <span class="op">-</span><span class="st"> </span>i.Value), <span class="dv">1</span>))][diff <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.1</span>]
comp &lt;-<span class="st"> </span><span class="kw">nameData</span>(<span class="st">&#39;forestry&#39;</span>, <span class="st">&quot;forestry_prod_trade&quot;</span>, comp)
<span class="kw">setnames</span>(comp, <span class="kw">c</span>(<span class="st">&quot;i.Value&quot;</span>, <span class="st">&quot;i.flagObservationStatus&quot;</span>, <span class="st">&quot;i.flagMethod&quot;</span>), 
         <span class="kw">c</span>(<span class="st">&quot;new_Value&quot;</span>, <span class="st">&quot;new_flagObservationStatus&quot;</span>, <span class="st">&quot;new_flagMethod&quot;</span>))</code></pre></div>
<p><br></p>
</div>
<div id="save-data-in-the-sws-shared-drive-and-in-the-sws-database" class="section level2">
<h2><span class="header-section-number">1.10</span> <strong>Save data in the SWS shared drive and in the SWS database</strong></h2>
<p>The data with primary and grouped commodities at the national and regional levels can be also accessed by the user as a csv file in the <a href="file://hqlprsws1.hq.un.fao.org/sws_r_share/ForestryProdAndTrade/output/faoswsForestryAggregation/">SWS shared drive</a>. The full data is saved in the folder <strong>full_results/full_results.csv</strong>, whereas the comparison csv file is saved in the folder <strong>comparisons/diff_values.csv</strong>. Every time the module runs these files are updated.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Saving in the SWS shared drive</span>
<span class="kw">write.csv</span>(data_all, <span class="kw">file.path</span>(<span class="kw">Sys.getenv</span>(<span class="st">&#39;R_SWS_SHARE_PATH&#39;</span>), <span class="st">&#39;ForestryProdAndTrade/output/faoswsForestryAggregation/full_results&#39;</span>, <span class="st">&#39;full_results.csv&#39;</span>), <span class="dt">row.names =</span> <span class="ot">FALSE</span>)
<span class="kw">write.csv</span>(comp, <span class="kw">file.path</span>(<span class="kw">Sys.getenv</span>(<span class="st">&#39;R_SWS_SHARE_PATH&#39;</span>), <span class="st">&#39;ForestryProdAndTrade/output/faoswsForestryAggregation/comparisons&#39;</span>, <span class="st">&#39;diff_values.csv&#39;</span>), <span class="dt">row.names =</span> <span class="ot">FALSE</span>)
<span class="co"># Saving in the SWS database</span>
stats &lt;-<span class="st"> </span><span class="kw">SaveData</span>(<span class="st">&quot;forestry&quot;</span>, <span class="dt">dataset =</span> swsContext.datasets[[<span class="dv">1</span>]]<span class="op">@</span>dataset,
                  <span class="dt">data =</span> data_all,
                  <span class="dt">chunkSize =</span> <span class="dv">50000</span>,
                  <span class="dt">waitTimeout =</span> <span class="dv">2000000</span>)
<span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">&#39;FORESTRY AGGREGATION IS SAVED IN THE SESSION &#39;</span>, <span class="kw">Sys.time</span>()))
<span class="kw">paste0</span>(<span class="st">&quot;ForestryAggregation module ran successfully!!!&quot;</span>,
       stats<span class="op">$</span>inserted, <span class="st">&quot; observations written, &quot;</span>,
       stats<span class="op">$</span>ignored, <span class="st">&quot; weren&#39;t updated, &quot;</span>,
       stats<span class="op">$</span>discarded, <span class="st">&quot; had problems.&quot;</span>)</code></pre></div>
<p><br></p>
</div>
<div id="runnig-the-module-step-by-step" class="section level2 unnumbered">
<h2><strong>Runnig the module (STEP BY STEP)</strong></h2>
<p>The steps decrebide below are pointing the users (FOA unit) to the right direction for running the module sucessfully.</p>
<ol style="list-style-type: decimal">
<li>Login to <a href="https://caf.fao.org/login?service=https://hqlqasws1.hq.un.fao.org:8443/sws/">SWS QA</a>.
<div class="figure"><span id="fig:unnamed-chunk-10"></span>
<img src="images/step_01.PNG" alt="SWS QA login." width="100%" />
<p class="caption">
Figure 1.1: SWS QA login.
</p>
</div>
<p><br></p></li>
<li><strong>Run a new query.</strong> Run the query on the <strong>forestry_prod_trade_agg</strong> data set.
<div class="figure"><span id="fig:unnamed-chunk-11"></span>
<img src="images/step_02.PNG" alt="Run the query." width="100%" />
<p class="caption">
Figure 1.2: Run the query.
</p>
</div>
<p><br></p></li>
</ol>
<p>The module has met the.</p>
<ol start="3" style="list-style-type: decimal">
<li>Select faoswsForestryAggregation plugin.
<div class="figure"><span id="fig:unnamed-chunk-13"></span>
<img src="images/step_03.PNG" alt="SWS QA login." width="100%" />
<p class="caption">
Figure 1.3: SWS QA login.
</p>
</div>
<p><br></p></li>
<li>Wait for results.
<div class="figure"><span id="fig:unnamed-chunk-14"></span>
<img src="images/step_05.PNG" alt="Waiting for results." width="100%" />
<p class="caption">
Figure 1.4: Waiting for results.
</p>
</div>
<p><br></p></li>
<li>Check results on the session. The data set is saved directly in the database as forestry_prod_trade_agg data set. The user can check the results on the session.
<div class="figure"><span id="fig:unnamed-chunk-15"></span>
<img src="images/step_06.PNG" alt="Aggregates on the session." width="100%" />
<p class="caption">
Figure 1.5: Aggregates on the session.
</p>
</div></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

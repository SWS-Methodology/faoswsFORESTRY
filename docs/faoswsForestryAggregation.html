<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 The faoswsForestryAggregation module | Forestry Production and Trade in the SWS</title>
  <meta name="description" content="The online book describes steps towards the migration of the current FORESTRY PRODUCTION AND TRADE statistical processes into the Corporate Statistical Working System (SWS)" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 The faoswsForestryAggregation module | Forestry Production and Trade in the SWS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/forestry_cover_book.png" />
  <meta property="og:description" content="The online book describes steps towards the migration of the current FORESTRY PRODUCTION AND TRADE statistical processes into the Corporate Statistical Working System (SWS)" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 The faoswsForestryAggregation module | Forestry Production and Trade in the SWS" />
  
  <meta name="twitter:description" content="The online book describes steps towards the migration of the current FORESTRY PRODUCTION AND TRADE statistical processes into the Corporate Statistical Working System (SWS)" />
  <meta name="twitter:image" content="images/forestry_cover_book.png" />



<meta name="date" content="2020-04-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ForestryCarryForward.html"/>
<link rel="next" href="ForestryValidationAnnualChanges.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>



<link rel="stylesheet" href="ess.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#welcome"><strong>Welcome</strong></a></li>
<li><a href="preface.html#preface"><strong>Preface</strong></a><ul>
<li><a href="preface.html#how-to-use-this-book"><strong>How to use this book</strong></a></li>
<li><a href="preface.html#why-to-use-the-sws"><strong>Why to use the SWS</strong></a></li>
<li><a href="preface.html#migration-actors"><strong>Migration actors</strong></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ForestryFramework.html"><a href="ForestryFramework.html"><i class="fa fa-check"></i><b>1</b> <strong>Forestry Production and Trade - Framework</strong></a><ul>
<li class="chapter" data-level="1.1" data-path="ForestryFramework.html"><a href="ForestryFramework.html#data-collection"><i class="fa fa-check"></i><b>1.1</b> <strong>Data Collection</strong></a></li>
<li class="chapter" data-level="1.2" data-path="ForestryFramework.html"><a href="ForestryFramework.html#entering-data"><i class="fa fa-check"></i><b>1.2</b> <strong>Entering Data</strong></a></li>
<li class="chapter" data-level="1.3" data-path="ForestryFramework.html"><a href="ForestryFramework.html#aggregates"><i class="fa fa-check"></i><b>1.3</b> <strong>Aggregates</strong></a></li>
<li class="chapter" data-level="1.4" data-path="ForestryFramework.html"><a href="ForestryFramework.html#validationdissemination"><i class="fa fa-check"></i><b>1.4</b> <strong>Validation/Dissemination</strong></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ForestryUNECEITTOInputData.html"><a href="ForestryUNECEITTOInputData.html"><i class="fa fa-check"></i><b>2</b> <strong>The Forestry_UNECE_ITTO_Input_Data module</strong></a><ul>
<li class="chapter" data-level="2.1" data-path="ForestryUNECEITTOInputData.html"><a href="ForestryUNECEITTOInputData.html#steps"><i class="fa fa-check"></i><b>2.1</b> <strong>Steps</strong></a></li>
<li class="chapter" data-level="2.2" data-path="ForestryUNECEITTOInputData.html"><a href="ForestryUNECEITTOInputData.html#running-the-module"><i class="fa fa-check"></i><b>2.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ForestryValidationInput.html"><a href="ForestryValidationInput.html"><i class="fa fa-check"></i><b>3</b> <strong>The Forestry_Validation_Input module</strong></a><ul>
<li class="chapter" data-level="3.1" data-path="ForestryValidationInput.html"><a href="ForestryValidationInput.html#steps-1"><i class="fa fa-check"></i><b>3.1</b> <strong>Steps</strong></a></li>
<li class="chapter" data-level="3.2" data-path="ForestryValidationInput.html"><a href="ForestryValidationInput.html#running-the-module-1"><i class="fa fa-check"></i><b>3.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ForestryCarryForward.html"><a href="ForestryCarryForward.html"><i class="fa fa-check"></i><b>4</b> <strong>The faoswsForestryCarryForward module</strong></a><ul>
<li class="chapter" data-level="4.1" data-path="ForestryCarryForward.html"><a href="ForestryCarryForward.html#steps-2"><i class="fa fa-check"></i><b>4.1</b> <strong>Steps</strong></a></li>
<li class="chapter" data-level="4.2" data-path="ForestryCarryForward.html"><a href="ForestryCarryForward.html#running-the-module-2"><i class="fa fa-check"></i><b>4.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html"><i class="fa fa-check"></i><b>5</b> <strong>The faoswsForestryAggregation module</strong></a><ul>
<li class="chapter" data-level="5.1" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#steps-3"><i class="fa fa-check"></i><b>5.1</b> <strong>Steps</strong></a><ul>
<li class="chapter" data-level="5.1.1" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#read-in-the-data"><i class="fa fa-check"></i><b>5.1.1</b> <strong>Read in the data</strong></a></li>
<li class="chapter" data-level="5.1.2" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#get-regional-aggregation"><i class="fa fa-check"></i><b>5.1.2</b> <strong>Get regional aggregation</strong></a></li>
<li class="chapter" data-level="5.1.3" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#get-forestry-commodity-aggregation"><i class="fa fa-check"></i><b>5.1.3</b> <strong>Get Forestry commodity aggregation</strong></a></li>
<li class="chapter" data-level="5.1.4" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#get-unit-values"><i class="fa fa-check"></i><b>5.1.4</b> <strong>Get Unit values</strong></a></li>
<li class="chapter" data-level="5.1.5" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#get-back-the-original-flags"><i class="fa fa-check"></i><b>5.1.5</b> <strong>Get back the original flags</strong></a></li>
<li class="chapter" data-level="5.1.6" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#convert-faostat-regions-to-sws-regions"><i class="fa fa-check"></i><b>5.1.6</b> <strong>Convert FAOSTAT regions to SWS regions</strong></a></li>
<li class="chapter" data-level="5.1.7" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#binding-national-and-regional-data"><i class="fa fa-check"></i><b>5.1.7</b> <strong>Binding national and regional data</strong></a></li>
<li class="chapter" data-level="5.1.8" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#compare-before-and-after-aggregations"><i class="fa fa-check"></i><b>5.1.8</b> <strong>Compare before and after aggregations</strong></a></li>
<li class="chapter" data-level="5.1.9" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#save-data-in-the-sws-share-drive-and-database"><i class="fa fa-check"></i><b>5.1.9</b> <strong>Save data in the SWS Share Drive and database</strong></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="faoswsForestryAggregation.html"><a href="faoswsForestryAggregation.html#running-the-module-3"><i class="fa fa-check"></i><b>5.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html"><i class="fa fa-check"></i><b>6</b> <strong>The ForestryValidationAnnualChanges module</strong></a><ul>
<li class="chapter" data-level="6.1" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html#steps-4"><i class="fa fa-check"></i><b>6.1</b> <strong>Steps</strong></a><ul>
<li class="chapter" data-level="6.1.1" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html#read-in-data"><i class="fa fa-check"></i><b>6.1.1</b> Read in data</a></li>
<li class="chapter" data-level="6.1.2" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html#data-filtering"><i class="fa fa-check"></i><b>6.1.2</b> Data filtering</a></li>
<li class="chapter" data-level="6.1.3" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html#annual-change-check"><i class="fa fa-check"></i><b>6.1.3</b> Annual Change check</a></li>
<li class="chapter" data-level="6.1.4" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html#email-the-user"><i class="fa fa-check"></i><b>6.1.4</b> Email the user</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ForestryValidationAnnualChanges.html"><a href="ForestryValidationAnnualChanges.html#running-the-module-4"><i class="fa fa-check"></i><b>6.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html"><i class="fa fa-check"></i><b>7</b> <strong>The ForestryValidationNegativeConsump module</strong></a><ul>
<li class="chapter" data-level="7.1" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html#steps-5"><i class="fa fa-check"></i><b>7.1</b> <strong>Steps</strong></a><ul>
<li class="chapter" data-level="7.1.1" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html#read-in-data-1"><i class="fa fa-check"></i><b>7.1.1</b> Read in data</a></li>
<li class="chapter" data-level="7.1.2" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html#data-filtering-1"><i class="fa fa-check"></i><b>7.1.2</b> Data filtering</a></li>
<li class="chapter" data-level="7.1.3" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html#negative-consumption-check"><i class="fa fa-check"></i><b>7.1.3</b> Negative consumption check</a></li>
<li class="chapter" data-level="7.1.4" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html#email-the-user-1"><i class="fa fa-check"></i><b>7.1.4</b> Email the user</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="ForestryValidationNegativeConsump.html"><a href="ForestryValidationNegativeConsump.html#running-the-module-5"><i class="fa fa-check"></i><b>7.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html"><i class="fa fa-check"></i><b>8</b> <strong>The ForestryValidationUnitPrice module</strong></a><ul>
<li class="chapter" data-level="8.1" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html#steps-6"><i class="fa fa-check"></i><b>8.1</b> <strong>Steps</strong></a><ul>
<li class="chapter" data-level="8.1.1" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html#read-in-data-2"><i class="fa fa-check"></i><b>8.1.1</b> Read in data</a></li>
<li class="chapter" data-level="8.1.2" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html#data-filtering-2"><i class="fa fa-check"></i><b>8.1.2</b> Data filtering</a></li>
<li class="chapter" data-level="8.1.3" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html#unit-price-check"><i class="fa fa-check"></i><b>8.1.3</b> Unit Price check</a></li>
<li class="chapter" data-level="8.1.4" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html#email-the-user-2"><i class="fa fa-check"></i><b>8.1.4</b> Email the user</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ForestryValidationUnitPrice.html"><a href="ForestryValidationUnitPrice.html#running-the-module-6"><i class="fa fa-check"></i><b>8.2</b> <strong>Running the module</strong></a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="sws-resources.html"><a href="sws-resources.html"><i class="fa fa-check"></i><b>A</b> SWS resources</a><ul>
<li class="chapter" data-level="A.1" data-path="sws-resources.html"><a href="sws-resources.html#code-lists"><i class="fa fa-check"></i><b>A.1</b> Code lists</a></li>
<li class="chapter" data-level="A.2" data-path="sws-resources.html"><a href="sws-resources.html#datatables"><i class="fa fa-check"></i><b>A.2</b> Datatables</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#forestry-product-aggregation-elements"><i class="fa fa-check"></i>Forestry Product Aggregation Elements</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#forestry-product-aggregation-tree"><i class="fa fa-check"></i>Forestry Product Aggregation Tree</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#forestry-aggregate-composition"><i class="fa fa-check"></i>Forestry Aggregate Composition</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#forestry-countries-partners"><i class="fa fa-check"></i>Forestry Countries Partners</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#forestry-domain-elements"><i class="fa fa-check"></i>Forestry Domain Elements</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#fs-m49-regions"><i class="fa fa-check"></i>FS M49 regions</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#m49-fs-iso-mapping"><i class="fa fa-check"></i>M49 FS ISO Mapping</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#trade-outlier-tresholds"><i class="fa fa-check"></i>Trade outlier tresholds</a></li>
<li class="chapter" data-level="" data-path="sws-resources.html"><a href="sws-resources.html#uneceitto-input-data"><i class="fa fa-check"></i>UNECE/ITTO Input Data</a></li>
<li class="chapter" data-level="A.3" data-path="sws-resources.html"><a href="sws-resources.html#datasets"><i class="fa fa-check"></i><b>A.3</b> Datasets</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Forestry Production and Trade in the SWS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="faoswsForestryAggregation" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> <strong>The faoswsForestryAggregation module</strong></h1>
<!--The module **faoswsForestryAggregation** is essentially a validation tool which is used by the the technical unit to check the effects of data changes in the forestry_prod_trade data set on geographical and commodity aggregations.-->
<p>The module <strong>faoswsForestryAggregation</strong> comprehend the main step in the <em>Forestry Production and Trade</em> process as it calculates the aggregates by region and item that will be disseminated through <strong>FAOSTAT</strong>.</p>
<div class="figure" style="text-align: center"><span id="fig:faoswsForestryAggregationWorkflow"></span>
<img src="images/faoswsForestryAggregation.png" alt="Workflow of the faoswsForestryAggregation module" width="85%" />
<p class="caption">
Figure 5.1: Workflow of the faoswsForestryAggregation module
</p>
</div>
<div id="steps-3" class="section level2">
<h2><span class="header-section-number">5.1</span> <strong>Steps</strong></h2>
<p>The module can be basically split into four parts as below.</p>
<div id="read-in-the-data" class="section level3">
<h3><span class="header-section-number">5.1.1</span> <strong>Read in the data</strong></h3>
<p>The module uses the <strong>forestry_prod_trade</strong> dataset as input. According to the technical unit, they will be constantly changing this dataset throughout the data cycle, specially when new data come in or the officers decide to make changes based on their domain knowledge.</p>
</div>
<div id="get-regional-aggregation" class="section level3">
<h3><span class="header-section-number">5.1.2</span> <strong>Get regional aggregation</strong></h3>
<p>After reading in the input dataset, the module geographically aggregates the primary commodities based on FAOSTAT - UNSD M49 mapping. Please, for a full representation of this table consult either the Appendix <a href="sws-resources.html#tab:m49fsisomapping">A.11</a> or <a href="http://www.fao.org/faostat/en/#data/FO">this link</a>.</p>
</div>
<div id="get-forestry-commodity-aggregation" class="section level3">
<h3><span class="header-section-number">5.1.3</span> <strong>Get Forestry commodity aggregation</strong></h3>
<p>Once a data set with regional aggregate is ready, the module moves to producing commodity aggregations at the national and regional levels. <!--Before the aggregations, the modules filters out all commodity groups and analytical elements (Export and Import unit values) so that they can be recalculated. -->
Since there is an interplay between commodity groups, the module carries the aggregation in tandem, with three commodity groups being aggregated first and then rest of aggregates.</p>
<table class="table" style="font-size: 12px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:tab1">Table 5.1: </span>First commodity groups to be calculated by the faoswsForestryAggregation module
</caption>
<thead>
<tr>
<th style="text-align:right;background-color: #a9c9a7 !important;">
CommodityGroup
</th>
<th style="text-align:left;background-color: #a9c9a7 !important;">
CommodityGroupName
</th>
<th style="text-align:right;background-color: #a9c9a7 !important;">
CommodityCode
</th>
<th style="text-align:left;background-color: #a9c9a7 !important;">
CommodityName
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1660
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphite, unbleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1661
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphite, bleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1662
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphate, unbleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1663
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphate, bleached
</td>
</tr>
<tr>
<td style="text-align:right;">
1656
</td>
<td style="text-align:left;">
Chemical wood pulp
</td>
<td style="text-align:right;">
1686
</td>
<td style="text-align:left;">
Chemical wood pulp, sulphite
</td>
</tr>
<tr>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Printing and writing papers
</td>
<td style="text-align:right;">
1612
</td>
<td style="text-align:left;">
Printing and writing papers, uncoated, wood containing
</td>
</tr>
<tr>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Printing and writing papers
</td>
<td style="text-align:right;">
1615
</td>
<td style="text-align:left;">
Printing and writing papers, uncoated, wood free
</td>
</tr>
<tr>
<td style="text-align:right;">
1674
</td>
<td style="text-align:left;">
Printing and writing papers
</td>
<td style="text-align:right;">
1616
</td>
<td style="text-align:left;">
Printing and writing papers, coated
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1676
</td>
<td style="text-align:left;">
Household and sanitary papers
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1681
</td>
<td style="text-align:left;">
Wrapping and packaging paper and paperboard
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1683
</td>
<td style="text-align:left;">
Other paper and paperboard n.e.s.
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1617
</td>
<td style="text-align:left;">
Case materials
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1618
</td>
<td style="text-align:left;">
Cartonboard
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1621
</td>
<td style="text-align:left;">
Wrapping papers
</td>
</tr>
<tr>
<td style="text-align:right;">
1675
</td>
<td style="text-align:left;">
Other paper and paperboard
</td>
<td style="text-align:right;">
1622
</td>
<td style="text-align:left;">
Other papers mainly for packaging
</td>
</tr>
</tbody>
</table>
<p><br></p>
</div>
<div id="get-unit-values" class="section level3">
<h3><span class="header-section-number">5.1.4</span> <strong>Get Unit values</strong></h3>
<p>Once the import and export figures are calculated for values and quantity, the unit price, which is the quotient between values and quantity, can be easily calculated for both primary and group commodities at the national and regional levels.
<br></p>
</div>
<div id="get-back-the-original-flags" class="section level3">
<h3><span class="header-section-number">5.1.5</span> <strong>Get back the original flags</strong></h3>
<p>With unit values already in the data sets (national and regional), the last step is to recovery the flags from the original input. Data records added during the processing come either from geographic or commodity aggregation. Therefore, these records have <strong>“E”</strong> (Aggregation) as flagObservationStatus and <strong>“s”</strong> (summation) as flagMethod.
<br></p>
</div>
<div id="convert-faostat-regions-to-sws-regions" class="section level3">
<h3><span class="header-section-number">5.1.6</span> <strong>Convert FAOSTAT regions to SWS regions</strong></h3>
<p>The processed regional data set uses FAOSTAT codes for regions. To be able to save the results in the SWS, regions must be converted to SWS regional codes compatible with the <strong>geographicAreaM49</strong> in the <strong>forestry_prod_trade_agg</strong> dataset. For this, the module uses the following function.</p>
</div>
<div id="binding-national-and-regional-data" class="section level3">
<h3><span class="header-section-number">5.1.7</span> <strong>Binding national and regional data</strong></h3>
<p>Binding national and regional data sets.
<!--```{r, eval=FALSE}
data_all <- rbind(pivot_national_flags, pivot_regional_flags_sws)
data_all <- data_all[, Value := round(Value, 1)][order(geographicAreaM49, measuredItemForestry, measuredItemForestry)]
data_all <- data_all[, lapply(.SD, as.character)]
data_all$Value <- as.numeric(data_all$Value)
data_all <- data_all[complete.cases(data_all), ]
```--></p>
</div>
<div id="compare-before-and-after-aggregations" class="section level3">
<h3><span class="header-section-number">5.1.8</span> <strong>Compare before and after aggregations</strong></h3>
<p>As a validation tool, the faoswsForestryAggregation module also needs to return what has changed from the input dataset. The module flags values where the absolute difference between the input dataset and the aggregate dataset is higher than 0.1.
<br></p>
</div>
<div id="save-data-in-the-sws-share-drive-and-database" class="section level3">
<h3><span class="header-section-number">5.1.9</span> <strong>Save data in the SWS Share Drive and database</strong></h3>
<p>The data with primary and grouped commodities at the national and regional levels can be accessed by the user as a csv file in the <a href="file://hqlprsws1.hq.un.fao.org/sws_r_share/ForestryProdAndTrade/output/faoswsForestryAggregation/">SWS shared drive</a>. The full data is saved in the folder <strong>ForestryProdAndTrade -&gt; output -&gt; faoswsForestryAggregation -&gt; results</strong>, whereas the comparison csv file is saved in the folder <strong>ForestryProdAndTrade -&gt; output -&gt; faoswsForestryAggregation -&gt; comparisons</strong>. Every time the module runs these files are updated.
In the SWS - database, the data is found in the dataset <strong>forestry_prod_trade_agg</strong>.</p>
</div>
</div>
<div id="running-the-module-3" class="section level2">
<h2><span class="header-section-number">5.2</span> <strong>Running the module</strong></h2>
<ol style="list-style-type: decimal">
<li><p>Log in the SWS;</p></li>
<li><p>Click on <strong>New Query</strong>;</p></li>
<li><p>Select <strong>Forestry domain</strong> and <strong>forestry_prod_trade_agg dataset</strong>;</p></li>
<li><p>Select whatever geographicAreaM49, measuredElement, measuredItemForestry and timePointYears. After that, run the query;
<br></p>
<div class="figure" style="text-align: center"><span id="fig:queryAggregates"></span>
<img src="images/forestry_prod_trade_agg_query.PNG" alt="Steps 1 to 4" width="100%" />
<p class="caption">
Figure 5.2: Steps 1 to 4
</p>
</div>
<p><br></p></li>
<li><p>Select the <strong>faoswsForestryAggregation</strong> module, choose the <em>parameters</em> (Start and End year) and click on <strong>Run plugin</strong>;</p></li>
</ol>
<br>
<div class="figure" style="text-align: center"><span id="fig:AggregatePlugin"></span>
<img src="images/aggregate_parameters.png" alt="Select the faoswsForestryAggregation plugin and run it" width="100%" />
<p class="caption">
Figure 5.3: Select the faoswsForestryAggregation plugin and run it
</p>
</div>
<p><br>
6. Wait for a window message to appear in the session: <strong>ForestryAggregation module ran successfully!!!</strong>;
<br>
7. Click on <strong>Save to dataset</strong>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ForestryCarryForward.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ForestryValidationAnnualChanges.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
